# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ PanelFlow

## –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –®–∞–≥ 1: –ì–ª—É–±–æ–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
python debug_navigation.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç **–¥–µ—Ç–∞–ª—å–Ω—É—é** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:

- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏ –æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É
- –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –≤–∏–¥–∂–µ—Ç –∏ –ø–∞–Ω–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –ö–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- –ì–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π

### –®–∞–≥ 2: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å –æ—Ç–ª–∞–¥–∫–æ–π

```bash
python simple_test.py
```

–ü–æ–∫–∞–∂–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

### –®–∞–≥ 3: –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ pytest

```bash
pytest test_navigation.py -v
```

–ò–ª–∏ –±–µ–∑ pytest:

```bash
python test_navigation.py
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º

### 1. ‚ùå AssertionError –≤ simple_test

**–ü—Ä–∏—á–∏–Ω—ã:**

- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –û—à–∏–±–∫–∞ –≤ `_execute_navigation_down`
- –ü–∞–Ω–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `debug_navigation.py` - –æ–Ω –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ —Å–±–æ—è.

### 2. ‚ùå Empty suite –≤ pytest

**–ü—Ä–∏—á–∏–Ω–∞:** Pytest –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `test_navigation.py` - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pytest —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π.

### 3. üîß –ú–µ—Ç–æ–¥—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

–ï—Å–ª–∏ `debug_navigation.py` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º–µ—Ç–æ–¥—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:

```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –≤ application.py:
def _handle_widget_submission(self, event): ...
def _execute_navigation_down(self, source_node, source_widget_id, target): ...
def _find_node_by_widget_id(self, widget_id): ...
```

## –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ debug_navigation.py

```
üîç === –û–¢–õ–ê–î–ö–ê –ú–ï–¢–û–î–û–í APPLICATION ===

1. –ù–ê–ß–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï:
   active_node: main
   is_active: True
   children_stacks: {}

2. –ü–û–ò–°–ö –í–ò–î–ñ–ï–¢–ê 'goto_child':
   ‚úÖ –ù–∞–π–¥–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏: main
   –í–∏–¥–∂–µ—Ç: button '–ö –¥–æ—á–µ—Ä–Ω–µ–π –ø–∞–Ω–µ–ª–∏'

3. –ü–†–û–í–ï–†–ö–ê –ü–ê–ù–ï–õ–ò 'child':
   ‚úÖ –ü–∞–Ω–µ–ª—å –Ω–∞–π–¥–µ–Ω–∞: '–î–æ—á–µ—Ä–Ω—è—è'

4. –û–¢–ü–†–ê–í–ö–ê –°–û–ë–´–¢–ò–Ø WidgetSubmittedEvent:
   –û—Ç–ø—Ä–∞–≤–ª—è—é: widget_id='goto_child', value=True

üîß === –í–´–ó–û–í –û–ë–†–ê–ë–û–¢–ß–ò–ö–ê ===
widget_id: goto_child
value: True
context: {}
form_data: {'goto_child': True}
–í–û–ó–í–†–ê–©–ê–Æ: ('navigate_down', 'child')

üì¢ –°–û–ë–´–¢–ò–ï: StateChangedEvent

5. –°–û–°–¢–û–Ø–ù–ò–ï –ü–û–°–õ–ï –°–û–ë–´–¢–ò–Ø:
   active_node: child
   –°–æ–±—ã—Ç–∏—è –ø–æ–ª—É—á–µ–Ω–æ: 1
   –†–æ–¥–∏—Ç–µ–ª—å: main
   –°—Ç–µ–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª—è: ['goto_child']

üéâ –£–°–ü–ï–•! –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

## –ï—Å–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–í—ã—Ö–æ–¥ `debug_navigation.py` –ø–æ–∫–∞–∂–µ—Ç, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞:

1. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ `_handle_widget_submission`
2. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ `_execute_navigation_down`
3. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è ErrorOccurredEvent** ‚Üí —Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
4. **–í–∏–¥–∂–µ—Ç/–ø–∞–Ω–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω—ã** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

1. ‚úÖ –ï—Å–ª–∏ `debug_navigation.py` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—Ö ‚Üí —è–¥—Ä–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –ï—Å–ª–∏ `simple_test.py` –ø—Ä–æ—Ö–æ–¥–∏—Ç ‚Üí –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã
3. ‚úÖ –ï—Å–ª–∏ `pytest test_navigation.py` –ø—Ä–æ—Ö–æ–¥–∏—Ç ‚Üí –≥–æ—Ç–æ–≤—ã –∫ TUI —Ä–µ–Ω–¥–µ—Ä–µ—Ä—É

**–ì–ª–∞–≤–Ω–æ–µ:** –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ `debug_navigation.py` - –æ–Ω –¥–∞—Å—Ç –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ!